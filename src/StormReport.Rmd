---
title: "Storm Report"
author: "Paul Reiners"
date: "August 9, 2014"
output: html_document
---

Synopsis
--------

Data Processing
---------------
```{r cache=TRUE}
# This only works if I use the full path.  I don't know why.
file <- "/Users/paulreiners/Dropbox/education/coursera/JohnsHopkins/DataScience/05_ReproducibleResearch/reproducible-research-project-2/data/repdata-data-StormData.csv"
storm.data = read.csv(file, header = TRUE)
```

```{r echo=FALSE}
library(ggplot2)
```

```{r}
reduced.storm.data <- 
        storm.data[,c("EVTYPE", "FATALITIES", "INJURIES", "PROPDMG")]
agg.fatalities.data <-
        aggregate(
                reduced.storm.data$FATALITIES, 
                by=list(reduced.storm.data$EVTYPE), FUN=sum, na.rm=TRUE)
colnames(agg.fatalities.data) = c("event.type", "fatality.total")
fatalities.sorted <- agg.fatalities.data[order(-agg.fatalities.data$fatality.total),] 
top.fatalities <- fatalities.sorted[1:10,]
top.fatalities$event.type <- 
    factor(
        top.fatalities$event.type, levels=top.fatalities$event.type, 
        ordered=TRUE)
ggplot(data=top.fatalities, aes(x=event.type, y=fatality.total)) + 
    geom_bar(stat="identity") + xlab("Event type") + ylab("Total fatalities") + 
    ggtitle("Fatalities By Event Type") +
    theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

Results
-------
